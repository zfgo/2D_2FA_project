\documentclass[11pt]{article} % EXPAND THE PREAMBLE TO SEE ALL OF THECODE
\usepackage[utf8]{inputenc}
\usepackage{amsmath, amsfonts} % math features and the \begin{aligh*}feature
\usepackage[margin=1.0in]{geometry} % [margin=1.0in]
\usepackage{graphicx} % more arguments for the \includegraphics command
\usepackage{enumitem} % allows better formatting for list environments
\newcommand{\comment}[1]{} % for multiline comments
\usepackage[stretch=10]{microtype} % best package ever
% \usepackage{changepage} \usepackage[symbol]{footmisc} % use symbols
% instead of numbers for footnotes
\usepackage{titletoc} % better toc formatting
\usepackage{titlesec} % to make fancier section/sub/subsubsectionformatting
\usepackage[nottoc]{tocbibind} % add references to the toc
\usepackage{hyperref} % for hyper links
\usepackage{cite} % for citing bibtex

\usepackage{titletoc} % better toc formatting

\title{Final Report: 2D-2FA Software Implementation}
\author{Zane Globus-O'Harra, Doug Ure}
\date{\textit{9 June 2023}}

\begin{document}
\maketitle

\section*{Abstract}

TODO TODO TODO TODO TODO TODO TODO TODO TODO 

\tableofcontents

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Introduction}

Two-factor authentication (2FA) is the contemporary approach to
authorizing a user, where the first authentication factor is the user's
password, with the second factor being an additional piece of
information that only the user could know. This additional piece of
information is generally categorized to three types:
\begin{enumerate}
    \item something the users knows, e.g., a password;
    \item something the user has, e.g., a physical key;
    \item something the user is, e.g., a fingerprint \cite{MFAProtocols}.
\end{enumerate}
Most commonly, the second authentication factor is a PIN that the user
enters on a separate device, or a push notification sent to the user
over a secure channel to a trusted device that the user approves
\cite{MFAProtocols}. However, both PIN-2FA and push-based 2FA have some
issues, such as shoulder surfing \cite{ShoulderSurfingWild,
ShoulderSurfingExperimental} SIM swap attacks \cite{Saha2016}, and
neglectful user approvals \cite{BypassingPush}, among others.

A recent (2021) paper \cite{shirvanian2d2fa} by Shirvanian and Agrawal
presents a new approach to 2FA, which they have coined ``2D-2FA.'' In
this new approach, the two factors are the user's login information
(their secret password), and a randomly generated identifier, which is
generated by the server and displayed to the user on their client, which
they must enter into their personal device for their session to be
approved. The two ``dimensions'' come from the fact that the identifier
is used to automatically generate a PIN on the device, and both the PIN
and the identifier are sent to the server, which verifies the generated
PIN. Hence the name ``2D-2FA,'' where the two factors are the password
and the identifier, and the two dimensions are the identifier and the
PIN. 

In our project, we hope to implement the authentication phase of the
2D-2FA system, following the implementation laid out in
\cite{shirvanian2d2fa}. In doing this, we hope to learn more about
multifactor authentication and network security, as well as verifying
that the 2D-2FA system functions correctly and meets the design goals as
described by Shirvanian and Agrawal. 

% when a user logs in with their username and password, a
% unique identifier is displayed to them. The user then inputs
% this same identifier on their device. A one-time PIN is generated on the
% device, and transferred automatically to the server, along with the
% identifier. The identifier is used in the PIN's computation, so that the
% PIN is bound to a specific session. 

% The user's device and the server agree on a secret key during a one-time
% registration process, which is also used in the PIN computation. Once
% the PIN is transferred to the server, the server authenticates the
% session associated with the identifier by verifying the PIN, thereby
% taking two dimensions into account (the PIN and the identifier).

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Keywords}

To avoid further confusion, we will address several important keywords
that are important to the design and implementation of the 2D-2FA
system. 

% \paragraph{2D-2FA} This is the name of the system that is outlined in
% \cite{shirvanian2d2fa}. It uses no third party software, and relies only
% on standardized encryption and hashing algorithms, as well as
% standardized network protocols. The two dimensions that this system uses
% to authenticate the user is the identifier and the PIN.

\paragraph{Identifier} This is a random value that is generated by the
server and presented to the user via the client interface. The user
needs to enter the identifier onto their device, where it is used during
the PIN generation. The server then uses the identifier that it
originally generated to verify the PIN. In \cite{shirvanian2d2fa}, they
recommend using a pattern or a QR code as the identifier for ease of
use, although they mention that there are many possible ways of
implementing a random identifier. In our implementation, we used a
6-digit number as the identifier to decrease the complexity of
development. 
% increase the ease of implementation. 

\paragraph{PIN} The PIN is generated using the time slice and the
identifier. It is sent to 
\paragraph{User} words words words
\paragraph{Client} words words words
\paragraph{Server} words words words
\paragraph{Device} words words words

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Motivations}

We are motivated to work on this project for several key reasons.
Firstly, the subject of this project has real-world relevance. 2FA is
becoming increasingly more common to authenticate users, and as it
becomes more prevalent, attackers will focus more of their efforts on
finding ways to break through its layers of security. Our project will
help us learn about ways to further increase the security of 2FA by
using additional information along with the user's credentials and the
server-provided ``identifier.''

This is also a learning opportunity for us. Neither of us are very
familiar with security, and it is something that we are very interested
in learning about. By completing this project, we will develop valuable
technical skills and increase our knowledge base, as well as preparing
us for future projects and industry roles.

Lastly, this project could have a real impact on end-users. 2FA enhances
users' trust and confidence in online systems by making their personal
information and online interactions more secure. This project has the
potential to contribute to a larger goal of make a more secure digital
environment. 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Objectives}

Our objectives for this project are to create a working implementation
of the 2D-2FA system in software, focusing mainly on the authentication
phase, as described in section 3.2 of \cite{shirvanian2d2fa}. As
previously mentioned in our progress report, we have written software to
implement the functionality of the server and the device in this
authentication scheme. We also added a simple web interface for the
client and the device, so that the user can use their browser to use our
implementation. 

In terms of specific deliverables, these were outlined in our midterm
report, but are repeated here for posterity.
\begin{itemize}
    \item A working implementation of 2D-2FA.

    \begin{itemize}
        \item Programs for the server and the device, as described in
        the 2D-2FA paper. 

        \item This implementation will work across multiple devices.

        \item This implementation will work for multiple users.
    \end{itemize}

    \item Test cases for our code.

    \item Documentation.

    \begin{itemize}
        \item Installation instructions.

        \item Usage instructions.

        \item A design diagram.

        \item Well-commented code.
    \end{itemize}
\end{itemize}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Related Work}

In this section, we will look at some traditional 2FA implementations,
chiefly hardware token-based authentication and single sign-on software
token-based authentication.

\subsection{Hardware Token Authentication}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Single Sign-On Software Token Authentication}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{2D-2FA}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Design}

The 2D-2FA system consists of two phases, the registration phase and the
authentication phase. In our project, we assumed that the registration
phase had already been completed between the involved parties, but we
will go over that phase here because it would be required for the
implementation of a full 2D-2FA system, rather than a toy example or
proof of concept implementation.

\paragraph{Registraion Phase}
During the registration phase, the parties involved in the 2D-2FA
protocol need to establish communication channels between them, and
share secret keys between the server and the device. 

First, a user would register their username and password with the
server. The server would pick a secret key for that user (generating it
from their password using HMAC). The secret then needs to be transferred
to the user's device (e.g., cell phone), which is typically done by
manually entering it into the device, or by scanning a QR code generated
by the server. This is so that the device will be able to generate PINs
later on in the 2D-2FA process. 

The server stores a hash of the user's password and secret key, and the
device stores only the secret key related to the user's account stored
on the server. The client (e.g., a web browser on a laptop that the user
uses to log in to the server) does not store any information during the
registration phase. 

\paragraph{Authentication Phase}
The authentication phase involves the interaction of the parties to
authenticate the user to the server in a secure fashion. 

First, the user attempts to log in to the server from the client. The
user's login information (username and password) are used as the first
authentication factor. Next, the server displays a unique identifier to
the user through the client (the identifier can be implemented in a
variety of ways, either via QR code, a fourgram pattern as described in
section 6.1 of \cite{shirvanian2d2fa}, and so on). 

On the user's device, the user selects the server that they are logging
in to, and enters the identifier that was displayed to them on the
client. The device generates a PIN using the identifier, the current
time, and the user's secret key. The PIN and the identifier are sent to
the server.

When the server receives the PIN and the identifier, it authenticates
the user's session associated with the identifier, generating several
PINs to find one that matches with the time the PIN was generated on the
user's device. During this phase, the server keeps a temporary record of
all active sessions and identifiers.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Implementation}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Results}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Security Analysis}

TODO TODO TODO TODO TODO TODO TODO TODO TODO TODO

There are several possible avenues of attack to the 2D-2FA system that
are proposed in \cite{shirvanian2d2fa}. In this section, we will go over
each attack vector and analyze how the system protects against these
attacks, as well as explaining how our implementation prevents these
attacks. 

\paragraph{Client Compromise}
In this attack, an attacker would have compromised the client that the
user uses to log into the server, and thus gain access to the user's
password. Assuming the device is not also compromised, the user's
account is still secure. 

This attack is prevented because once an attacker logs in using the
user's password, they will receive an identifier generated by the
server. But, without access to the user's secret key, the attacker has
no means of computing a PIN that corresponds to the identifier, and
thus no means of providing a valid PIN to the server. Additionally,
without access to the user's device, the attacker has no way to generate
a valid PIN without guessing the user's secret key, which would not be
feasible. 

In our implementation, TODO

\paragraph{Device Compromise}
In this attack, an attacker would have compromised the user's device,
and as such they have full control over the device. In this attack
vector, we assume that the attacker has access to the secret information
stored on the device. This allows the attacker to generate any PIN, for
any identifier.

This attack is prevented because for the attacker to gain access to the
user's account, the attacker still needs to know the user's password to
log in on the client. If the user has chosen a secure password that can
not easily be guessed, the attacker must guess the user's password to
gain access to their account, which would not be feasible. 

In our implementation, TODO

\paragraph{Channel Compromise}
In this attack, an attacker has control over the channels connecting the
parties (the client, device, and server) in the system. Specifically,
there are three main channels in the 2D-2FA system. The channel between
the client and the server is secure, the channel between the client and
the device is through the user, and the channel between the device and
the server is a regular channel. In this attack vector, the attacker
could either listen to the channels (eavesdrop), or they could modify or
block the network traffic. 

This attack is prevented because, like with the client compromise, the
attacker does not know the user's password. 

TODO TODO TODO TODO

In our implementation, TODO

% There are three channels, each connecting the client (C), the server
% (S), and the device (D), as seen in the image below. Similar to the
% device compromise, the attacker can not get the user's secret key. While
% the channel from the device to the server is a regular channel that the
% attacker can get the identifier and the PIN from, they can not use these
% to authenticate themselves. 

\paragraph{User Negligence}
In this attack, a user is simply negligent, and inadvertantly grants
access to an attacker. 

This attack is prevented because, a user would only accidentally approve
an attacker's session when the user enters the identifier that is
displayed to the attacker, rather than the identifier that is displayed
to the user. Depending on the type of identifier used, the possibility
of this occurring is very low.

In our implementation, we used a 6-digit identifier, which means that if
an attacker has logged in and is presented with an identifier, the user
has a one-in-a-million chance (0.0001\%) of approving that attacker's
session. 

\paragraph{Attacks on Third Parties}
In other MFA systems, third party entities are introduced, such as a MFA
service provider. The system owner would need to trust these service
providers, as well as study the security of the services that they
provide to be comfortable with the security of their services. Attackers
can target these third parties, as well as the channels connecting the
third party services to the main system, which increases the complexity
of the security analysis of the system. 

Because 2D-2FA does not use any third party systems, this decreases the
complexity of the security analysis, and thus reduces the surface of
attack into the system. Additionally, 2D-2FA only uses well-established
and well-studied technologies (HMAC, SSL/TLS, random number generation,
etc.), further reducing attack vectors.

In our implementation, we use the well-established technologies
mentioned in and used by \cite{shirvanian2d2fa}. The only variation is
that we use TCP connections and encrypt the messages
that we send over those connections instead of using TLS.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Conclusion}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Complications}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Lessons}

The important lessons that we have learned include project planning,
collaboration skills, and iterative development. While we had prior
experience in all of these areas from previous projects, this project
helped ingrain these principles into how we worked, altogether adding to
a better workflow and increased productivity. 

For the project planning, we had thoroughly read through the
implementation section in \cite{shirvanian2d2fa}. From this, we 
broke down each element of the implementation into smaller chunks that
were easier to tackle and implement. This allowed us to develop one
module at a time, and ensure that module was functioning in the desired
way before continuing to the next module. 

In terms of collaboration, we have weekly meetings where we discuss what
we have accomplished in the past week, and what we plan on completing
for the next week. During the week, we update each other with our
progress, as well as asking questions or seeing if we have suggestions
for each other. 

With regard to iterative development, this goes hand in hand with our
project planning. Because we have broken down the problem into
bite-sized chunks, we can iteratively implement these small portions,
easily adding features and functionality to them as we progress, and
iteratively changing them or modifying them when we encounter the need
to do so.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Recommendations}


Possibly add to this with typing proof \cite{liuTypingProof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\bibliographystyle{ieeetr}
\bibliography{ref}

\end{document}
